<div class="notification-settings">
  <div class="settings-header">
    <h2 class="settings-title">‚öôÔ∏è Configura√ß√µes de Notifica√ß√µes</h2>
    <p class="settings-subtitle">
      Gerencie como voc√™ deseja receber notifica√ß√µes
    </p>

    @if (savedMessage) {
    <div class="success-message">{{ savedMessage }}</div>
    }
  </div>

  <form
    [formGroup]="notificationForm"
    (ngSubmit)="onSubmit()"
    class="settings-form"
  >
    <!-- Status Geral -->
    <div class="settings-section">
      <div class="section-header">
        <h3 class="section-title">Status Geral</h3>
        <span class="badge">{{ activeNotificationsCount }} ativas</span>
      </div>

      <div class="switch-group">
        <ui-switch
					formControlName="enableNotifications"
          label="Habilitar Notifica√ß√µes"
        ></ui-switch>
        <p class="switch-description">Controle mestre para todas as notifica√ß√µes</p>
      </div>
    </div>

    <!-- Canais de Notifica√ß√£o -->
    <div
      class="settings-section"
      [class.section-disabled]="!notificationsEnabled"
    >
      <div class="section-header">
        <h3 class="section-title">üì¨ Canais de Notifica√ß√£o</h3>
      </div>

      <div class="switch-group">
        <ui-switch
          formControlName="emailNotifications"
          label="Email"
        ></ui-switch>
        <p class="switch-description">Receba notifica√ß√µes por email</p>
      </div>

      <div class="switch-group">
        <ui-switch
          formControlName="pushNotifications"
          label="Push Notifications"
        ></ui-switch>
        <p class="switch-description">
          Notifica√ß√µes no navegador e dispositivos m√≥veis
        </p>
      </div>

      <div class="switch-group">
        <ui-switch formControlName="smsNotifications" label="SMS"></ui-switch>
        <p class="switch-description">Mensagens de texto importantes</p>
      </div>
    </div>

    <!-- Tipos de Notifica√ß√£o -->
    <div
      class="settings-section"
      [class.section-disabled]="!notificationsEnabled"
    >
      <div class="section-header">
        <h3 class="section-title">üîî Tipos de Notifica√ß√£o</h3>
      </div>

      <div class="switch-group">
        <ui-switch
          formControlName="securityAlerts"
          label="Alertas de Seguran√ßa"
        ></ui-switch>
        <p class="switch-description">
          Avisos sobre atividades suspeitas e seguran√ßa da conta
        </p>
      </div>

      <div class="switch-group">
        <ui-switch
          formControlName="productUpdates"
          label="Atualiza√ß√µes de Produto"
        ></ui-switch>
        <p class="switch-description">Novos recursos e melhorias do sistema</p>
      </div>

      <div class="switch-group">
        <ui-switch
          formControlName="marketingEmails"
          label="Emails de Marketing"
        ></ui-switch>
        <p class="switch-description">
          Ofertas especiais e novidades promocionais
        </p>
      </div>
    </div>

    <!-- Prefer√™ncias -->
    <div class="settings-section">
      <div class="section-header">
        <h3 class="section-title">üé® Prefer√™ncias</h3>
      </div>

      <div class="switch-group">
        <ui-switch formControlName="darkMode" label="Modo Escuro"></ui-switch>
        <p class="switch-description">Interface com tema escuro</p>
      </div>

      <div class="switch-group">
        <ui-switch
          formControlName="soundEffects"
          label="Efeitos Sonoros"
        ></ui-switch>
        <p class="switch-description">Sons de notifica√ß√£o e feedback</p>
      </div>
    </div>

    <!-- Bot√µes de A√ß√£o -->
    <div class="form-actions">
      <button type="button" class="btn btn--secondary" (click)="toggleAll(false)">Desabilitar Tudo</button>
      <button type="button" class="btn btn--secondary" (click)="toggleAll(true)">Habilitar Tudo</button>
      <button type="button" class="btn btn--outline" (click)="resetForm()">Restaurar Padr√£o</button>
      <button type="submit" class="btn btn--primary">Salvar Configura√ß√µes</button>
    </div>

    <!-- Estado do Form (Debug) -->
    <div class="form-debug">
      <h4 class="debug-title">Estado do Formul√°rio (Reactive Forms)</h4>
      <pre class="debug-content">{{ notificationForm.value | json }}</pre>
      <div class="debug-info">
        <span
          class="debug-badge"
          [class.debug-badge--success]="notificationForm.valid"
        >
          Valid: {{ notificationForm.valid }}
        </span>
        <span class="debug-badge"> Dirty: {{ notificationForm.dirty }} </span>
        <span class="debug-badge">
          Touched: {{ notificationForm.touched }}
        </span>
      </div>
    </div>
  </form>
</div>
